# 编写测试用例

该模块主要用于编写测试用例，可以利用添加的任务资源按照一定的顺序组合成某个业务场景的测试用例，并且可以将用例分享到分享模块，供其他开发人员或产品人员使用
![用例](https://res.cloudinary.com/dqhbr3uh3/image/upload/v1600592644/%E7%94%A8%E4%BE%8B_n6tics.png)

## 添加任务资源

点击添加任务按钮，页面右侧会显示出所有已创建好的任务资源，可以通过搜索和筛选功能找到想要添加的资源，采用拖拽的方式拖到用例区域即可添加成功

## 参数传递和替换

很多时候我们需要从上一个步骤中获取结果传递到下一个任务中，此时可以使用用例的参数位置和参数替换功能，参数位置是指需要使用哪个位置的任务的结果作为参数，比如说第二个位置的HTTP任务需要使用第一个位置的data数据源的`mobile`作为参数，则可以在参数位置处填写1，在参数替换位置按照HTTP参数替换规则替换内容。

1、默认的参数位置是上一个任务，可以手动指定其他位置的任务的结果作为参数输入。
2、上一个位置的任务的返回结果根为root，数据源任务类型的格式为json格式，sql任务类型的格式为数组。
3、参数替换规则和任务的替换规则一致
![参数替换](https://res.cloudinary.com/dqhbr3uh3/image/upload/v1600595096/%E7%94%A8%E4%BE%8B2_pd5wrb.png)

## 结果拓展

有时下面任务执行所需要的参数可能需要前面某2个或者多个任务执行结果的任荣共同组成，此时可以使用结果拓展功能。
参数替换后的数据格式规则为：
| 当前任务结果        | 之前的结果          | 拓展后的最终结果 |
| ------------- |:-------------:| -----:|
| {"name":"hh"}     | "xxxx"|{"name":"hh","extendProperty":"xxxx"}|
| {"name":"hh"}     | {"age":"23"}       |{"name":"hh","age":"23"}|
| {"name":"hh"}  | [1,2,3] |{"name":"hh","extendArray":[1,2,3]} |
| [{"name":"hh"},{"age":"23"}]  | "xxxx" | [{"extendProperty":"xxxx"},{"name":"hh"},{"age":"23"}] |
| [{"name":"hh"},{"age":"23"}]  | {"new":"true"} | [{"new":"true"},{"name":"hh"},{"age":"23"}] |
| [{"name":"hh"},{"age":"23"}]  | [{"new":"true"}] | [{"new":"true"},{"name":"hh"},{"age":"23"}] |

## 执行次数设置

可以指定某个任务的执行次数，默认1次

## 延迟执行时间

可以设置执行某个任务的延迟执行时间，默认是0，时间单位是毫秒，如果设置该选项，则该任务会延迟一定时间之后再执行

## 断言

任务返回的结果为root，如果断言结果中某个字符串，格式为
`return root.code === 'SUCCESS'`
`return root.message != 'SUCCESS'`
如果断言内容是数组中的内容，则格式为：
`return root.0.data === "success"`

## 高级断言

在用例中，每个任务都可以根据断言结果来选择下一个任务的跳转位置。
针对某个任务，如果断言成功就跳转到第四个任务，如果断言失败就跳转到第三个任务
![断言](https://res.cloudinary.com/dqhbr3uh3/image/upload/v1600597332/%E6%96%AD%E8%A8%80_gszkip.png)

## 运行测试用例

用例执行可以在用例模块单独执行某个用例，执行结果会在右侧实时显示，也可以在首页将用例添加到用例组中，然后一键执行所有用例。用例组中的用例只是拖拽移动顺序。执行完成后，可以在测试报告模块查看执行结果。
